version: '3.7'

services:
   redis:
      image: redis
      container_name: redis_visor
      environment:
         save: ''
         requirepass: jYGjFNJg5y7GHjk!
      ports:
        - "6379:6379"

   mongo:
      container_name: some_mongo
      image: mongo:4
      ports:
        - "27017:27017"
      environment:
         MONGO_INITDB_ROOT_USERNAME: root
         MONGO_INITDB_ROOT_PASSWORD: example
         MONGO_INITDB_DATABASE: visordb
      volumes:
      -  type: volume
         source: mongodata
         target: /data/db
         consistency: consistent
      - ./initmongo.js:/docker-entrypoint-initdb.d/mongo-init.js:ro
   
   visor:
      image: npm:seba
      ports:
        - "8080:8080"
   
   visorgo:
      container_name: visorback
     image: visor-go:0.1z
     ports:
       - "2000:2000"

volumes:
   mongodata:
